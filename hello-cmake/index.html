<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>From sources to executables &mdash; CMake Workshop  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/mystnb.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx_lesson.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx_rtd_theme_ext_color_contrast.css" type="text/css" />
      <link rel="stylesheet" href="../_static/style.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/coderefinery.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/togglebutton.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/minipres.js"></script>
        <script src="../_static/tabs.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Compile flags, definitions, and debugging" href="../flags-definitions-debugging/" />
    <link rel="prev" title="Brief tour to demonstrate concepts/capabilities" href="../tour/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../" class="icon icon-home"> CMake Workshop
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../setup/">Setting up your system</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../motivation/">Motivation and overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tour/">Brief tour to demonstrate concepts/capabilities</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hands-on workshop</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">From sources to executables</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#type-along-building-an-executable">Type-along: building an executable</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exercise-building-and-linking-a-library">Exercise: building and linking a library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../flags-definitions-debugging/">Compile flags, definitions, and debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../targets/">Target-based build systems with CMake</a></li>
<li class="toctree-l1"><a class="reference internal" href="../environment/">Detecting your environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dependencies/">Finding and using dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/">Creating and running tests with CTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fetch-content/">Automated dependency handling with FetchContent</a></li>
<li class="toctree-l1"><a class="reference internal" href="../growing-projects/">Growing projects: pitfalls and recommendations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../resources/">Resources and books</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits/">Credits</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">CMake Workshop</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home"></a> &raquo;</li>
      <li>From sources to executables</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/coderefinery/cmake-workshop/blob/main/content/hello-cmake.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="from-sources-to-executables">
<span id="sources-to-executables"></span><h1>From sources to executables<a class="headerlink" href="#from-sources-to-executables" title="Permalink to this headline"></a></h1>
<div class="admonition-objectives objectives admonition">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Learn how to write a simple <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code>.</p></li>
<li><p>Learn how to build executables and libraries.</p></li>
</ul>
</div>
<div class="section" id="type-along-building-an-executable">
<span id="hello-world-executable"></span><h2>Type-along: building an executable<a class="headerlink" href="#type-along-building-an-executable" title="Permalink to this headline"></a></h2>
<div class="admonition-compiling-hello-world-with-cmake exercise important admonition">
<p class="admonition-title">Compiling “Hello, world” with CMake</p>
<p>We will now proceed to compile a single source file to an executable. Choose
your favorite language and start typing along!</p>
<ol class="arabic simple">
<li><p>Create a new folder and in the folder create a source file:</p></li>
</ol>
<blockquote>
<div><div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">C++</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">Fortran</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cstdlib&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">say_hello</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Hello world&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">say_hello</span><span class="p">();</span><span class="w"></span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_SUCCESS</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">pure function </span><span class="n">say_hello</span><span class="p">()</span> <span class="k">result</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

  <span class="k">implicit none</span>

<span class="k">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span> <span class="kd">::</span> <span class="n">message</span>

  <span class="n">message</span> <span class="o">=</span> <span class="s1">&#39;Hello world&#39;</span>

<span class="k">end function</span>

<span class="k">program </span><span class="n">example</span>

  <span class="k">implicit none</span>

<span class="k">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span> <span class="kd">::</span> <span class="n">say_hello</span>

  <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="n">say_hello</span><span class="p">()</span>

<span class="k">end program</span>
</pre></div>
</div>
</div></div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>The folder contains only the source code. We need to add a file called
<code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> to it.  CMake reads the contents of these special files
when generating the build system:</p></li>
</ol>
<blockquote>
<div><div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">C++</button><button aria-controls="panel-1-1-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-1" name="1-1" role="tab" tabindex="-1">Fortran</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span> <span class="s">3.14</span><span class="p">)</span>

<span class="nb">project</span><span class="p">(</span><span class="s">example</span> <span class="s">LANGUAGES</span> <span class="s">CXX</span><span class="p">)</span>

<span class="nb">add_executable</span><span class="p">(</span><span class="s">hello</span> <span class="s">hello.cpp</span><span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-1-1" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0"><div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span> <span class="s">3.14</span><span class="p">)</span>

<span class="nb">project</span><span class="p">(</span><span class="s">example</span> <span class="s">LANGUAGES</span> <span class="s">Fortran</span><span class="p">)</span>

<span class="nb">add_executable</span><span class="p">(</span><span class="s">hello</span> <span class="s">hello.f90</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
</div></blockquote>
<ol class="arabic" start="3">
<li><p>We are ready to call CMake and get our build system:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cmake -S. -Bbuild
</pre></div>
</div>
</li>
<li><p>And finally build our executable:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cmake --build build
</pre></div>
</div>
</li>
<li><p>Try to also run the executable.</p></li>
</ol>
</div>
<div class="admonition-discussion-we-prefer-out-of-source-builds discussion attention admonition">
<p class="admonition-title">Discussion: We prefer out-of-source builds</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-S</span></code> switch specifies which source directory CMake should scan: this is
the folder containing the <em>root</em> <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code>, <em>i.e.</em> the one containing
the <a class="reference internal" href="https://cmake.org/cmake/help/latest/command/project.html"><span class="xref std std-term"><code class="docutils literal notranslate">project</code></span></a> command.
By default, CMake will allow <em>in-source</em> builds, <em>i.e.</em> storing build
artifacts alongside source files. This is <strong>not</strong> good practice: you should
always keep build artifacts from sources separate. Fortunately, the <code class="docutils literal notranslate"><span class="pre">-B</span></code>
switch helps with that, as it is used to give where to store build artifacts,
including the generated build system. This is the minimal invocation of <code class="docutils literal notranslate"><span class="pre">cmake</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cmake -S. -Bbuild
</pre></div>
</div>
<p>To switch to another generator, we will use the <code class="docutils literal notranslate"><span class="pre">-G</span></code> switch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cmake -S. -Bbuild -GNinja
</pre></div>
</div>
<p>Options to be used at build-system generation are passed with the <code class="docutils literal notranslate"><span class="pre">-D</span></code>
switch. For example, to change compilers:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cmake -S. -Bbuild -GNinja -DCMAKE_CXX_COMPILER<span class="o">=</span>clang++
</pre></div>
</div>
<p>Why prefer out-of-source builds?</p>
<ul class="simple">
<li><p>You can build several builds with the same source without having to copy the entire project
and merging changes later (sequential and parallel, debug and release).</p></li>
</ul>
</div>
<p>We have learned met three CMake directives (you can click on these to jump to
the official documentation help text):</p>
<ul class="simple">
<li><p><a class="reference internal" href="https://cmake.org/cmake/help/latest/command/cmake_minimum_required.html"><span class="xref std std-term"><code class="docutils literal notranslate">cmake_minimum_required</code></span></a></p></li>
<li><p><a class="reference internal" href="https://cmake.org/cmake/help/latest/command/project.html"><span class="xref std std-term"><code class="docutils literal notranslate">project</code></span></a></p></li>
<li><p><a class="reference internal" href="https://cmake.org/cmake/help/latest/command/add_executable.html"><span class="xref std std-term"><code class="docutils literal notranslate">add_executable</code></span></a></p></li>
</ul>
<p>The case of CMake commands and variables does not matter: the DSL is
case-insensitive. However, the plain-text files that CMake parses <strong>must be
called</strong> <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> and the case matters!</p>
</div>
<div class="section" id="exercise-building-and-linking-a-library">
<span id="hello-world-library"></span><h2>Exercise: building and linking a library<a class="headerlink" href="#exercise-building-and-linking-a-library" title="Permalink to this headline"></a></h2>
<div class="admonition-a-more-modular-hello-world exercise important admonition">
<p class="admonition-title">A more modular “Hello, world”</p>
<p>Only rarely we have one-source-file projects and more realistically, as
projects grow, we split them up into separate files. This simplifies
(re)compilation but also helps humans maintaining and understanding the
project.</p>
<p>We stay with the toy project but also here things got more real and more
modular and we decided to split the project up into several files:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-2-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-2-2-0" name="2-0" role="tab" tabindex="0">C++</button><button aria-controls="panel-2-2-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-1" name="2-1" role="tab" tabindex="-1">Fortran</button></div><div aria-labelledby="tab-2-2-0" class="sphinx-tabs-panel" id="panel-2-2-0" name="2-0" role="tabpanel" tabindex="0"><p>hello.cpp:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;greeting.hpp&quot;</span><span class="cp"></span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cstdlib&gt;</span><span class="cp"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">say_hello</span><span class="p">();</span><span class="w"></span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_SUCCESS</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>greeting.cpp:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;greeting.hpp&quot;</span><span class="cp"></span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">say_hello</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Hello world&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>greeting.hpp:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#pragma once</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">say_hello</span><span class="p">();</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-2-1" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-1" name="2-1" role="tabpanel" tabindex="0"><p>hello.f90:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">program </span><span class="n">example</span>

  <span class="k">use </span><span class="n">greeting</span><span class="p">,</span> <span class="k">only</span><span class="p">:</span> <span class="n">say_hello</span>

  <span class="k">implicit none</span>

<span class="k">  print</span> <span class="o">*</span><span class="p">,</span> <span class="n">say_hello</span><span class="p">()</span>

<span class="k">end program</span>
</pre></div>
</div>
<p>greeting.f90:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">module </span><span class="n">greeting</span>

  <span class="k">implicit none</span>

<span class="k">  public </span><span class="n">say_hello</span>

  <span class="k">private</span>

<span class="k">contains</span>

<span class="k">  pure function </span><span class="n">say_hello</span><span class="p">()</span> <span class="k">result</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="k">implicit none</span>

<span class="k">    </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span> <span class="kd">::</span> <span class="n">message</span>

    <span class="n">message</span> <span class="o">=</span> <span class="s1">&#39;Hello world&#39;</span>

  <span class="k">end function</span>

<span class="k">end module</span>
</pre></div>
</div>
</div></div>
<p><strong>Your first goal</strong>: try to build this by adapting the <cite>CMakeLists.txt</cite> from
earlier by first adding all the source files into the same <a class="reference internal" href="https://cmake.org/cmake/help/latest/command/add_executable.html"><span class="xref std std-term"><code class="docutils literal notranslate">add_executable</code></span></a>.</p>
</div>
<p>CMake can of course be used to produce libraries as well as executables.  The
relevant command is <a class="reference internal" href="https://cmake.org/cmake/help/latest/command/add_library.html"><span class="xref std std-term"><code class="docutils literal notranslate">add_library</code></span></a>.  You can link libraries can be linked into
other targets (executables or other libraries) with <a class="reference internal" href="https://cmake.org/cmake/help/latest/command/target_link_libraries.html"><span class="xref std std-term"><code class="docutils literal notranslate">target_link_libraries</code></span></a>.</p>
<div class="admonition-executables-and-libraries-are-targets callout admonition">
<p class="admonition-title">Executables and libraries are targets</p>
<p>We will encounter the term <strong>target</strong> repeatedly. In CMake, a target is any
object given as first argument to <a class="reference internal" href="https://cmake.org/cmake/help/latest/command/add_executable.html"><span class="xref std std-term"><code class="docutils literal notranslate">add_executable</code></span></a> or <a class="reference internal" href="https://cmake.org/cmake/help/latest/command/add_library.html"><span class="xref std std-term"><code class="docutils literal notranslate">add_library</code></span></a>.  Targets
are the basic atom in CMake.  Whenever you will need to organize complex
projects, think in terms of its targets and their mutual dependencies.  The
whole family of CMake commands <code class="docutils literal notranslate"><span class="pre">target_*</span></code> can be used to express chains of
dependencies and is much more effective than keeping track of state with
variables.  We will clarify these concepts in <a class="reference internal" href="../targets/#targets"><span class="std std-ref">Target-based build systems with CMake</span></a>.</p>
</div>
<div class="admonition-collecting-files-into-libraries exercise important admonition">
<p class="admonition-title">Collecting files into libraries</p>
<p><strong>Your second goal</strong>: now try to build a greeting library and link against this library
instead of collecting all sources into the executable target:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-3-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-3-3-0" name="3-0" role="tab" tabindex="0">C++</button><button aria-controls="panel-3-3-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-3-3-1" name="3-1" role="tab" tabindex="-1">Fortran</button></div><div aria-labelledby="tab-3-3-0" class="sphinx-tabs-panel" id="panel-3-3-0" name="3-0" role="tabpanel" tabindex="0"><div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span> <span class="s">3.14</span><span class="p">)</span>

<span class="nb">project</span><span class="p">(</span><span class="s">example</span> <span class="s">LANGUAGES</span> <span class="s">CXX</span><span class="p">)</span>

<span class="nb">add_executable</span><span class="p">(</span><span class="s">hello</span> <span class="s">hello.cpp</span><span class="p">)</span>

<span class="nb">add_library</span><span class="p">(</span><span class="s">greeting</span>
  <span class="s">SHARED</span>
    <span class="s">greeting.cpp</span>
    <span class="s">greeting.hpp</span>
  <span class="p">)</span>

<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">hello</span> <span class="s">PRIVATE</span> <span class="s">greeting</span><span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-3-1" class="sphinx-tabs-panel" hidden="true" id="panel-3-3-1" name="3-1" role="tabpanel" tabindex="0"><div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span> <span class="s">3.14</span><span class="p">)</span>

<span class="nb">project</span><span class="p">(</span><span class="s">example</span> <span class="s">LANGUAGES</span> <span class="s">Fortran</span><span class="p">)</span>

<span class="nb">add_executable</span><span class="p">(</span><span class="s">hello</span> <span class="s">hello.f90</span><span class="p">)</span>

<span class="nb">add_library</span><span class="p">(</span><span class="s">greeting</span>
  <span class="s">SHARED</span>
    <span class="s">greeting.f90</span>
  <span class="p">)</span>

<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">hello</span> <span class="s">PRIVATE</span> <span class="s">greeting</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
<p>Which solution did you like better? Discuss the pros and cons.</p>
<p>What kind of library did you get? Static or shared? Try to get the other
one.</p>
</div>
<div class="admonition-discussion-granulatity-of-libraries discussion attention admonition">
<p class="admonition-title">Discussion: Granulatity of libraries</p>
<p>How granular should we organize our targets?</p>
<ul class="simple">
<li><p>Collect all sources into one executable?</p></li>
<li><p>One library?</p></li>
<li><p>Many libraries?</p></li>
</ul>
<p>Discuss pros and cons and how you do this in your projects.</p>
</div>
<div class="admonition-keypoints keypoints admonition">
<p class="admonition-title">Keypoints</p>
<ul class="simple">
<li><p>CMake is a <strong>build system generator</strong>, not a build system.</p></li>
<li><p>You write <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> to describe how the build tools will create artifacts from sources.</p></li>
<li><p>We can define a multi-language project like this: <code class="docutils literal notranslate"><span class="pre">project(example</span> <span class="pre">LANGUAGES</span> <span class="pre">Fortran</span> <span class="pre">C</span> <span class="pre">CXX)</span></code></p></li>
<li><p>You can use the CMake suite of tools to manage the whole lifetime: from source files to tests to deployment.</p></li>
<li><p>The structure of the project is mirrored in the build folder.</p></li>
</ul>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../tour/" class="btn btn-neutral float-left" title="Brief tour to demonstrate concepts/capabilities" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../flags-definitions-debugging/" class="btn btn-neutral float-right" title="Compile flags, definitions, and debugging" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, EuroCC National Competence Centre Sweden (this is derived work from the ENCCS workshop, see &#39;Credits&#39; about changes).</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>